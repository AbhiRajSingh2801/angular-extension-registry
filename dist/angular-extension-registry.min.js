angular.module("extension-registry",["ngSanitize","extension-registry-utils"]),function(){"use strict";angular.module("extension-registry-utils",[]).constant("extensionRegistryUtils",function(){var n=Function.prototype.bind.bind(Function.prototype.call),t=n(String.prototype.split),e=n(Object.prototype.toString),i=function(n){return"[object Array]"===e(n)},r=function(n){return"[object Object]"===e(n)},o=function(n){return"[object Number]"===e(n)},u=function(n){return"[object Function]"===e(n)},c=n(Array.prototype.slice),s=function(n,t){for(var e=0;e<n.length;e++)t(n[e],e,n)},a=function(n,t){for(var e=[],i=0;i<n.length;i++)e.push(t(n[i],i,n));return e},l=function(n,t){for(var e=[],i=0;i<n.length;i++)t(n[i],i,n)&&e.push(n[i]);return e},f=function(n,t,e){for(var i=0;i<n.length;i++)e=t(e,n[i],i,n);return e},p=function(){var n=arguments[0],t=c(arguments,1),e=[];return s(t,function(t){s(n,function(n){n===t&&e.push(!0)})}),e.length===t.length},m=function(n){var t=[];return s(n,function(n){t=i(n)?t.concat(m(n)):t.concat(n)}),t},d=function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t},g=function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(n[e]);return t};return{unbind:n,split:t,slice:c,contains:p,each:s,map:a,reduce:f,filter:l,flatten:m,ownKeys:d,toArray:g,isFunction:u,isObject:r,isNumber:o}}())}(),function(){"use strict";angular.module("extension-registry").provider("extensionRegistry",["extensionRegistryUtils",function(n){var t={},e={},i=1e3,r=n.split,o=n.slice,u=n.each,c=n.map,s=n.contains,a=n.filter,l=n.flatten,f=n.reduce,p=n.ownKeys,m=n.toArray,d=n.isFunction,g=function(){u(m(e),function(n){n&&n()})},h=function(n,e){var r=i++;return t[n]||(t[n]={}),e&&d(e)&&(t[n][r]=e,g()),{_name:n,_key:r,remove:function(){delete t[n][r],g()}}},x=function(n){delete t[n._name][n._key],g()},y=function(){return t},v=function(){t={}};this.add=h,this.dump=y,this.clean=v,this.$get=["$log","$q","$templateCache",function(n,u,m){return{addType:function(n,t){m.put("__extension-"+n+".html",t)},add:h,remove:x,get:function(n,e,i,m){return u.all(l(f(c(r(n," "),function(n){return t[n]}),function(n,t){return n.concat(l(c(p(t),function(n){return t[n]&&t[n](i)})))},[]))).then(function(){return f(a(l(o(arguments)),function(n){return s(e,n&&n.type)?n:void 0}),function(n,t){return n.length>=m?n:(n.push(t),n)},[])})},subscribe:function(n){var t=i++;return e[t]=n,{unsubscribe:function(){delete e[t]}}},dump:y,clean:v}}]}])}(),function(){"use strict";angular.module("extension-registry").directive("extensionPoint",["$compile","$templateCache","extensionRegistryUtils",function(n,t,e){var i=e.each,r=function(n){return"__extension-"+n+".html"};return{restrict:"EA",scope:{extensionName:"=",extensionFilters:"=",extensionArgs:"=",extensionLimit:"="},transclude:!0,templateUrl:"__extension-point.html",controller:["$scope","$q","extensionRegistry",function(e,o,u){this.initialize=function(c,s,a){var l=function(){o.when(u.get(s,a,e.extensionArgs,Number(e.extensionLimit))).then(function(o){c.html(""),i(o,function(i){c.append(n("dom"===i.type?i.node:t.get(r(i.type)))(angular.extend(e.$new(!0),{item:i})))})})};l();var f=u.subscribe(l);e.$on("$destroy",function(){f.unsubscribe()})}}],link:function(n,t,e,i){var o=e.extensionName,u=e.extensionTypes&&e.extensionTypes.split(" ")||[],c=e.extensionArgs||{};angular.extend(n,{extTpl:r}),i.initialize(t,o,u,c)}}}])}(),function(){"use strict";angular.module("extension-registry").directive("extensionRenderer",["$compile",function(n){return{restrict:"AE",scope:{item:"=",index:"=",context:"="},templateUrl:"__extension-renderer.html",link:function(t,e){t.extTpl=function(n){return"__extension-"+n+".html"},"dom"===t.item.type&&(e.html(t.item.node),n(e.contents())(t))}}}])}();